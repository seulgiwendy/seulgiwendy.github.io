<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>봄이네집 개발 블로그</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="봄이네집 개발 블로그">
<meta property="og:url" content="https://tech.wheejuni.com/page/4/index.html">
<meta property="og:site_name" content="봄이네집 개발 블로그">
<meta property="og:locale" content="ko">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="봄이네집 개발 블로그">
  
    <link rel="alternate" href="/atom.xml" title="봄이네집 개발 블로그" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+KR:100,300,400,700&amp;subset=korean" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!--<div id="banner"></div>-->
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        <a href="/" id="main-nav-title" class="main-nav-link">봄이네집 개발 블로그</a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives/">Archives</a>
        
          <a class="main-nav-link" href="/about/">about</a>
        
      </nav>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-algorithm-caesar" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/algorithm/">algorithm</a>►<a class="article-category-link" href="/categories/algorithm/programmers-exercise/">programmers_exercise</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/07/algorithm-caesar/">알고리즘 타임 - (1) 시저 암호</a>
    </h1>
  

        <a href="/2018/04/07/algorithm-caesar/" class="article-date">
  <time datetime="2018-04-07T12:32:17.000Z" itemprop="datePublished">2018-04-07</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="시저-암호"><a href="#시저-암호" class="headerlink" title="시저 암호"></a>시저 암호</h3><p>어떤 문장의 각 알파벳을 일정한 거리만큼 밀어서 다른 알파벳으로 바꾸는 암호화 방식을 시저 암호라고 합니다.</p>
<p>A를 3만큼 밀면 D가 되고 z를 1만큼 밀면 a가 됩니다. 공백은 수정하지 않습니다.</p>
<p>보낼 문자열 s와 얼마나 밀지 알려주는 n을 입력받아 암호문을 만드는 caesar 함수를 완성해 보세요.</p>
<ul>
<li>“a B z”,4를 입력받았다면 “e F d”를 리턴합니다.</li>
</ul>
<hr>
<h4 id="풀이"><a href="#풀이" class="headerlink" title="풀이"></a>풀이</h4><p>기본적으로 <a href="http://egloos.zum.com/littletrue/v/4781098" target="_blank" rel="noopener">아스키 코드표</a> 를 숙지하고 있으면 어렵지 않게 해결할 수 있는 문제다. </p>
<p>127가지나 되니 숙지하진 말고(…) 이런 개념이 있다, 를 알고 필요할 때 찾아보면 된다. <strong>정규표현식은 외우면 외울수록 좋지만 이건 잘 모르겠다.</strong> 다만 알파벳 정도는 몇 번 부터 몇 번까지인지를 알아두는 것이 좋겠다. </p>
<ul>
<li>알파벳 소문자<code>(a ~ z)</code> : 97 ~ 122</li>
<li>알파벳 대문자<code>(A ~ Z)</code> : 65 ~ 90</li>
</ul>
<p><strong>범위를 초과하는 암호 인덱스에 대해서</strong></p>
<p>알파벳은 26글자이므로 26으로 나눈 나머지를 취하면 된다. </p>
<p>예를 들어 알파벳을 한 글자씩 134스텝을 뛴다 해도 결국 다섯바퀴를 돌아 네 번째 인덱스, 즉 D를 취하게 되는 것이다. </p>
<p>알파벳의 중간에서부터 출발해 알파벳의 범위를 넘는다면 알파벳의 갯수만큼 인덱스를 빼 주면(-26) 그만이다. </p>
<hr>
<h4 id="코오드"><a href="#코오드" class="headerlink" title="코오드"></a>코오드</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">caesar</span><span class="params">(s, n)</span>:</span></span><br><span class="line">    string_array = split_string(s)</span><br><span class="line">    encrypted_array = return_encrypted(string_array, n)</span><br><span class="line"></span><br><span class="line">    result = str.join(<span class="string">""</span>, encrypted_array)</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">split_string</span><span class="params">(string)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> list(string)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">return_encrypted</span><span class="params">(array, n)</span>:</span></span><br><span class="line">    encrypted_char = []</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> array:</span><br><span class="line">        origin_value = ord(char)</span><br><span class="line">        next_value = origin_value + (n % <span class="number">26</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(origin_value == <span class="number">32</span>):</span><br><span class="line">            encrypted_char.append(chr(<span class="number">32</span>))</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(origin_value &gt; <span class="number">64</span> <span class="keyword">and</span> origin_value &lt; <span class="number">91</span>):</span><br><span class="line">            <span class="keyword">if</span> next_value &gt; <span class="number">90</span>:</span><br><span class="line">                next_value = next_value - <span class="number">26</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(origin_value &gt; <span class="number">96</span> <span class="keyword">and</span> origin_value &lt; <span class="number">123</span>):</span><br><span class="line">            <span class="keyword">if</span> next_value &gt; <span class="number">122</span>:</span><br><span class="line">                next_value = next_value - <span class="number">26</span></span><br><span class="line"></span><br><span class="line">        print(next_value)</span><br><span class="line">        encrypted_char.append(chr(next_value))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> encrypted_char</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="느낀-점"><a href="#느낀-점" class="headerlink" title="느낀 점"></a>느낀 점</h3><ul>
<li><p>파이썬의 아스키 코드 함수 : <code>chr(), ord()</code>를 배움</p>
<ul>
<li>문자를 코드로 : <code>ord()</code></li>
<li>코드를 문자로 : <code>chr()</code></li>
</ul>
</li>
<li><p>아스키 코드표, 좀 외워두면 도움이 될까?</p>
</li>
</ul>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/04/07/algorithm-caesar/" data-id="ckk5ihpq70001dg9ops18113f" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/04/07/algorithm-caesar/#disqus_thread" class="article-comment-link">댓글</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-java-collections" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/java/">java</a>►<a class="article-category-link" href="/categories/java/data-structure/">data_structure</a>►<a class="article-category-link" href="/categories/java/data-structure/algorithm/">algorithm</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/04/07/java-collections/">JCF의 자료구조와 시간복잡도를 알아보자. - (1) List 편</a>
    </h1>
  

        <a href="/2018/04/07/java-collections/" class="article-date">
  <time datetime="2018-04-07T06:01:15.000Z" itemprop="datePublished">2018-04-07</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="Java-Collections-Framework-구현체들의-자료구조"><a href="#Java-Collections-Framework-구현체들의-자료구조" class="headerlink" title="Java Collections Framework 구현체들의 자료구조"></a>Java Collections Framework 구현체들의 자료구조</h3><hr>
<h4 id="List"><a href="#List" class="headerlink" title="List"></a>List</h4><ul>
<li>List 가기전에 벡터(Vector) 이야기 잠깐</li>
</ul>
<p><strong>Vector 란?</strong></p>
<ul>
<li>JDK 1.0 부터 존재하던 표준</li>
<li>ArrayList 출시되기 이전에 즐겨 사용</li>
<li><p>항상 Thread-safe함. (무조건 동기화)</p>
<ul>
<li>ArrayList와의 성능 차이를 만드는 요인이자 요즘 Vector를 안 쓰는 이유.</li>
<li>정말 Thread-safe한 리스트가 필요하다면 Synchronized List 등을 사용하는게 낫다. </li>
</ul>
</li>
</ul>
<h4 id="List-인터페이스의-구현체들"><a href="#List-인터페이스의-구현체들" class="headerlink" title="List 인터페이스의 구현체들"></a>List 인터페이스의 구현체들</h4><ul>
<li>AbstractList</li>
<li>AbstractSequentialList</li>
<li>ArrayList(!)</li>
<li>AttributeList</li>
<li>CopyOnWriteArrayList</li>
<li>LinkedList(!)</li>
<li>RoleList</li>
<li>RoleUnresolvedList</li>
<li>Stack</li>
<li>Vector </li>
</ul>
<p><strong>시간 복잡도</strong></p>
<p><code>size(), isEmpty()</code> : <code>O(1)</code></p>
<p><code>remove(), contains(), iterate()</code> : <code>O(n)</code></p>
<hr>
<h4 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h4><p>즐겨 사용하는 어레이리스트를 뜯어보자. </p>
<p><em>초기 생성</em></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayList</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Object[] elementData;</span><br><span class="line"></span><br><span class="line">    (...)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">(<span class="keyword">int</span> initialCapacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>();</span><br><span class="line">    <span class="keyword">if</span> (initialCapacity &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        (예외 처리 로직)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.elementData = <span class="keyword">new</span> Object[initialCapacity];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ArrayList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>(<span class="number">10</span>); <span class="comment">//크기를 명시하지 않으면 length 10의 배열 생성.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>내부적으로 transient 키워드를 사용하는 Object 배열 사용.</li>
<li>크기를 생성자로 명시할 수 있음. 명시하지 않는다면 크기는 10</li>
<li>자료의 빈번한 삭제와 삽입에는 불리함.</li>
<li>배열의 인덱스 값을 이용해 한 번에 원하는 값을 찾아올 수 있음. </li>
</ul>
<hr>
<h4 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h4><p>링크드리스트는 링크드리스트다. <strong>더 이상의 설명이 필요한가?</strong></p>
<p><em>뷁</em></p>
<p><strong>초기 생성</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractSequentialList</span>&lt;<span class="title">E</span>&gt; (...)</span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> Entry&lt;E&gt; header = <span class="keyword">new</span> Entry&lt;E&gt;(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        header.next = header.previous = header;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LinkedList</span><span class="params">(Colleciton&lt;? exttends E&gt; c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>();</span><br><span class="line">        addAll(c); <span class="comment">//생성자로 컬렉션을 전달하면 모든 원소를 링크드리스트에 담아 준다.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="알아둘-점"><a href="#알아둘-점" class="headerlink" title="알아둘 점"></a>알아둘 점</h4><ul>
<li>링크드리스트 자체에 대한 이해를 하자. </li>
<li>링크드리스트는 값과 다음 값의 위치를 갖고 있는 자료구조. </li>
</ul>
<hr>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/04/07/java-collections/" data-id="ckk5ihpr3000qdg9o1b5cnz1t" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/04/07/java-collections/#disqus_thread" class="article-comment-link">댓글</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-spring-kotlin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Spring/">Spring</a>►<a class="article-category-link" href="/categories/Spring/Kotlin/">Kotlin</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/30/spring-kotlin/">Spring 기반 프로젝트에 코틀린 많이 쓰(려고 노력하)는 이야기</a>
    </h1>
  

        <a href="/2018/03/30/spring-kotlin/" class="article-date">
  <time datetime="2018-03-30T00:22:45.000Z" itemprop="datePublished">2018-03-30</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!---->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/03/30/spring-kotlin/" data-id="ckk5ihps90022dg9o5p481s0v" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/03/30/spring-kotlin/#disqus_thread" class="article-comment-link">댓글</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hackathon-cicd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/devops/">devops</a>►<a class="article-category-link" href="/categories/devops/hackathon/">hackathon</a>►<a class="article-category-link" href="/categories/devops/hackathon/travis/">travis</a>►<a class="article-category-link" href="/categories/devops/hackathon/travis/react/">react</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/23/hackathon-cicd/">해커톤 나가서 삽질하기(2) - CI / CD 환경 구축(FE)</a>
    </h1>
  

        <a href="/2018/03/23/hackathon-cicd/" class="article-date">
  <time datetime="2018-03-23T03:48:23.000Z" itemprop="datePublished">2018-03-23</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="해커톤-나가서-삽질하기-2-CI-CD-환경-구축-FE"><a href="#해커톤-나가서-삽질하기-2-CI-CD-환경-구축-FE" class="headerlink" title="해커톤 나가서 삽질하기(2) - CI / CD 환경 구축(FE)"></a>해커톤 나가서 삽질하기(2) - CI / CD 환경 구축(FE)</h3><blockquote>
<p>들어가기에 앞서 저에게 늘 새로운 인사이트를 주시고 실무적인 테크닉도 넘치게 전달해 주시는 창천향로님의 블로그(<a href="http://jojoldu.tistory.com" target="_blank" rel="noopener">http://jojoldu.tistory.com</a>)와 창천향로님께 무한한 감사의 말씀을 드린다. </p>
<p>오늘 소개할 내용도 많은 부분이 창천향로님의 “스프링 부트로 웹서비스 출시하기” 시리즈에서 배운 것을 활용해보고 소개하는 것이다. </p>
</blockquote>
<p><strong>결론 - 해커톤 나가서 괜히 CICD 한다고 삽질하지 말자. 전혀 의미없다.</strong></p>
<p>나는 이번 해커톤에 참가하며 부족한 데브옵스(DevOps) 및 서버 운영 지식을 보충하겠다는 확고한(?) 목적 의식을 갖고 있었다. </p>
<p>때문에 CI / CD 환경 구축을 위한 초기 환경 세팅(Travis 가입, EC2 인스턴스 기본 세팅, 슬랙 채널 생성)을 마친 상태였다. <strong>이 작업에 만 하루 정도, 순작업시간 4~5시간 정도</strong>가 소요되었다.</p>
<p>물론 처음 해본 일이고, EC2 과금을 피하기 위한 눈물겨운 사투(…)를 벌였기 때문에 시간이 길어진 감이 있는데 <em>24시간 해커톤에서 4시간을 날리는 것은 엄청난 손해임이 분명하다.</em> MVP를 개발해 보여주는게 목표인 해커톤에서는 localhost:8080 해도 괜찮다. </p>
<h4 id="create-react-app-로컬-개발환경에서의-빌드와-배포"><a href="#create-react-app-로컬-개발환경에서의-빌드와-배포" class="headerlink" title="create-react-app 로컬 개발환경에서의 빌드와 배포"></a>create-react-app 로컬 개발환경에서의 빌드와 배포</h4><p><strong>간단하다!</strong> 아래 명령어만 입력하면 되는 거 아닌가. </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yarn build</span><br><span class="line"></span><br><span class="line">(혹은....)</span><br><span class="line"></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>
<h4 id="Travis-CI-Amazon-S3-환경에서의-빌드와-배포"><a href="#Travis-CI-Amazon-S3-환경에서의-빌드와-배포" class="headerlink" title="Travis CI - Amazon S3 환경에서의 빌드와 배포"></a>Travis CI - Amazon S3 환경에서의 빌드와 배포</h4><p>S3 Bucket의 정적 사이트 호스팅 기능을 사용하고, Travis CI를 통해 빌드 후 배포한다고 가정해 보겠다. 각 서비스의 <strong>기본 세팅이나 버킷 생성 등 준비절차</strong> 는 설명하지 않는다. </p>
<p>Flow는 다음과 같다.</p>
<blockquote>
<p>Master에 push/merge -&gt; Travis VM Build -&gt; S3 Upload</p>
</blockquote>
<ul>
<li>.travis.yml 작성</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">language:</span> <span class="string">node_js</span></span><br><span class="line"><span class="attr">node_js:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">"stable"</span></span><br><span class="line"><span class="attr">cache:</span></span><br><span class="line">  <span class="attr">directories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">node_modules</span></span><br><span class="line"><span class="attr">script:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">yarn</span> <span class="string">test</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">yarn</span> <span class="string">build</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">provider:</span> <span class="string">s3</span></span><br><span class="line">  <span class="attr">access_key_id:</span> <span class="string">$AWS_ACCESS_KEY</span></span><br><span class="line">  <span class="attr">secret_access_key:</span> <span class="string">$AWS_SECRET_KEY</span></span><br><span class="line">  <span class="attr">bucket:</span> <span class="string">YOUR-BUCKET</span></span><br><span class="line">  <span class="attr">region:</span> <span class="string">ap-northeast-2</span> <span class="comment">#서울의 리전명. </span></span><br><span class="line">  <span class="attr">local_dir:</span> <span class="string">build</span> <span class="comment">#build 후 ./build 디렉토리만 올라가게 한다.</span></span><br><span class="line">  <span class="attr">skip_cleanup:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">notifications:</span></span><br><span class="line">  <span class="attr">slack:</span> <span class="string">YOUR-SLACK-KEY</span></span><br></pre></td></tr></table></figure>
<p>React 기반의 FE CI / CD는 이걸로 끝이다. <strong>참 쉽죠?</strong></p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/03/23/hackathon-cicd/" data-id="ckk5ihpqs000fdg9ocjnwog88" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/03/23/hackathon-cicd/#disqus_thread" class="article-comment-link">댓글</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-new-theme" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notice/">notice</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/21/new-theme/">블로그 새단장!!!</a>
    </h1>
  

        <a href="/2018/03/21/new-theme/" class="article-date">
  <time datetime="2018-03-21T03:32:09.000Z" itemprop="datePublished">2018-03-21</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<p><strong><a href="https://github.com/stunstunstun/hexo-theme-chiangmai" target="_blank" rel="noopener">새로운 테마</a></strong> 를 적용해 보았습니다.</p>
<p>야호!</p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/03/21/new-theme/" data-id="ckk5ihps1001udg9o75u9cd79" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/03/21/new-theme/#disqus_thread" class="article-comment-link">댓글</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hackathon-kotlin" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/hackathon/">hackathon</a>►<a class="article-category-link" href="/categories/hackathon/kotlin/">kotlin</a>►<a class="article-category-link" href="/categories/hackathon/kotlin/java/">java</a>►<a class="article-category-link" href="/categories/hackathon/kotlin/java/Spring/">Spring</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/03/19/hackathon-kotlin/">해커톤 나가서 삽질하기 (1) - 코틀린으로 DTO를 만들어보자.</a>
    </h1>
  

        <a href="/2018/03/19/hackathon-kotlin/" class="article-date">
  <time datetime="2018-03-19T02:59:48.000Z" itemprop="datePublished">2018-03-19</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="해커톤-나가서-삽질하기-1-Kotlin으로-DTO를-만들어보자"><a href="#해커톤-나가서-삽질하기-1-Kotlin으로-DTO를-만들어보자" class="headerlink" title="해커톤 나가서 삽질하기 (1) - Kotlin으로 DTO를 만들어보자."></a>해커톤 나가서 삽질하기 (1) - Kotlin으로 DTO를 만들어보자.</h3><p>템플릿 엔진을 사용하지 않는 개발, 즉 프론트 프로젝트와 백엔드 프로젝트가 분리되어 있는 프로젝트의 가장 큰 난관은 <strong>데이터셋을 획정</strong> 하는 일이다. </p>
<p>누구나 시작할 땐 그럴싸한 계획이 있다. Git repo에 Wiki를 운영하자, PR을 보내기 전 미리 협의하자, RESTful하게 하자….. 그러나 이런 계획은 아마추어들의 개발 문화 하에서는 거의 지켜지지 않는다. 평소에 개발해도 지켜지지 않는데 <strong>24시간, 혹은 48시간 같은 촉박한 시간에 개발해야하는 해커톤</strong> 에서는 말할 필요도 없을 것이다. </p>
<blockquote>
<p>그러니까 백엔드 개발자는, DTO를 작성할 때 이게 반드시 바뀔 것이란(…) 확신을 가지고 언제든 수정하기 쉽게 작성할 수밖엔 없다. </p>
</blockquote>
<p>가장 좋은 것은 Jackson의 <a href="http://www.baeldung.com/jackson-annotations" target="_blank" rel="noopener">애노테이션</a>을 적절히 활용하여 로직의 수정 없이 serialization/deserialization 과정에서의 포맷만 변화를 주는 것이다. 하지만 애노테이션을 아무리 단다 한들 DTO를 작성하는 데 있어 Java가 갖는 구조적 한계점들 - getter/setter의 작성, 필드 선언의 장황함, 생성자 오버로딩 등…. - 을 넘을 수는 없을 것이다. </p>
<h4 id="We-Go-Kotlin"><a href="#We-Go-Kotlin" class="headerlink" title="We Go Kotlin!"></a>We Go Kotlin!</h4><p>해결책은 단 하나, <strong>코틀린을 도입하는 것이다.</strong></p>
<p>Spring은 이미 Kotlin을 광범위하게 지원하고 <a href="https://www.youtube.com/watch?v=SlBRce-aBOc" target="_blank" rel="noopener">있다.</a> 물론 당장 비즈니스 로직에 코틀린을 적용할 만큼 코틀린에 숙련도가 높지도 않고, 무엇보다 협업을 해야하는 경우 동료 개발자들에게 Kotlin으로 이주하라고 강요하는 것은 아주 고약한 일이 될 것이다. </p>
<p>나는 유연하고도 빠른 DTO의 작성을 위한 용도로만, 아주 제한적으로 Kotlin을 프로젝트에 적용하기로 마음먹었고, 이를 위해 Kotlin의 다른 부분은 학습하지 않고 data class 의 개념만 익혀 바로 프로젝트에 적용해봤다.</p>
<h4 id="Data-Class"><a href="#Data-Class" class="headerlink" title="Data Class"></a>Data Class</h4><p>Data class는 자바에는 없는 코틀린의 차별화된 기능으로 DTO, VO를 작성하기에 좋은 클래스다. </p>
<p>Data class는 변수 var 대신 값 val 을 가지며 아래와 같이 구현이 가능하다. </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">NewBookDocument</span></span>(</span><br><span class="line">        <span class="keyword">val</span> title : String = <span class="string">""</span>,</span><br><span class="line">        <span class="keyword">val</span> author : String = <span class="string">""</span>,</span><br><span class="line">        <span class="keyword">val</span> description : String = <span class="string">""</span>,</span><br><span class="line">        <span class="keyword">val</span> isbn : String = <span class="string">""</span>,</span><br><span class="line">        <span class="keyword">val</span> category : String? = <span class="string">""</span>,</span><br><span class="line">        <span class="keyword">val</span> location : String? = <span class="string">""</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>필드와 생성자를 <strong>동시에 선언</strong>하였고, getter/setter도 구현할 필요 없다. <strong>Lombok 사용한 게 아니다!</strong></p>
<p>같은 DTO를 Java로 작성했다면….</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NewBookDocument</span> </span>&#123; </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="keyword">private</span> String author;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line"></span><br><span class="line">    (...)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getTitle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        (...)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    (...)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>아. 피곤하다.</strong></p>
<p>Kotlin의 Data class 개념에 대한 이해를 위해서는 <a href="http://kotlinlang.org/docs/reference/data-classes.html" target="_blank" rel="noopener">이 레퍼런스</a>를 참고할 것을 권한다. </p>
<p>Data Class는 우리가 Java 개발 시에 사용했던 lombok 애노테이션 거의 대부분, @EqualsAndHashcode - @ToString 과 같은 애노테이션들을 사용할 필요 없이 자동으로 구현해준다. </p>
<h4 id="Jackson과-삽질하기"><a href="#Jackson과-삽질하기" class="headerlink" title="Jackson과 삽질하기"></a>Jackson과 삽질하기</h4><p>한가지 아쉬운 점은 Kotlin의 data class에서 생성자를 정의할 때, <strong>애노테이션을 직접 붙여주지 못한다는 점</strong>이다. </p>
<p>말이 어려운데 <em>아주 쉬운 얘기다</em>. 아래의 사례를 보며 같이 생각해보자. </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">FooDto</span></span>(</span><br><span class="line">    <span class="keyword">val</span> name: String = <span class="string">""</span>,</span><br><span class="line">    <span class="keyword">val</span> age: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>까탈스러운 프론트엔드 개발자의 요구로 인해 JSON으로 serialize 시에 필드 이름을 FooName이라고 매핑해야 하는 상황이라고 가정해보자. </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"FooName"</span> : <span class="string">"seulgi"</span>, <span class="attr">"age"</span>: <span class="number">24</span>&#125;</span><br></pre></td></tr></table></figure>
<p>Java에서 하던 대로 하자면 자연스럽게 이렇게….. 시도해볼 것이다. (<strong>적어도 나는 그랬다.</strong>)</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">FooDto</span></span>(</span><br><span class="line">    <span class="meta">@JsonProperty(<span class="meta-string">"FooName"</span>)</span></span><br><span class="line">    <span class="keyword">val</span> name: String = <span class="string">""</span>,</span><br><span class="line">    <span class="keyword">val</span> age: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>접근방식 자체가 틀린 것은 아니다. Kotlin 파일에서도 Java에서 온 애노테이션들을 전부 사용할 수 있다. 그러나 우리는 Kotlin data class의 작동 방식에 대해 이해할 필요가 좀 있다. </p>
<p>만약 상기한 것과 같이 애노테이션을 선언한다면 엄밀히 말하면 우리는 Java에서 했던 것처럼 field나 getter를 애노테이트 한 것이 아닌, <strong>생성자의 파라미터에 애노테이트한 것</strong>과 같다. Kotlin도 당연히 이렇게 이해한다. </p>
<p>저 애노테이션을 객체의 field에서 사용하려면, 혹은 getter에서 사용하려면 아래와 같이 구현하면 된다. </p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">FooDto</span></span>(</span><br><span class="line">    <span class="meta">@field:JsonProperty</span>(<span class="string">"FooName"</span>)<span class="keyword">val</span> name: String = <span class="string">""</span>,</span><br><span class="line">    <span class="keyword">val</span> age: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">data</span> <span class="class"><span class="keyword">class</span> <span class="title">FooDto</span></span>(</span><br><span class="line">    <span class="meta">@get:JsonProperty</span>(<span class="string">"FooName"</span>)<span class="keyword">val</span> name: String = <span class="string">""</span>,</span><br><span class="line">    <span class="keyword">val</span> age: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>Java에서와 마찬가지로 deserialization 결과물은 같을 것이다. 이제 의도대로 Jackson 애노테이션이 작동한다! </p>
<h4 id="아직-남은-문제점"><a href="#아직-남은-문제점" class="headerlink" title="아직 남은 문제점"></a>아직 남은 문제점</h4><p><strong>Kotlin 클래스들에서 Lombok이 구현해준 메소드들을 사용할 수 없다.</strong> 심각한 문제다. </p>
<p>도메인 클래스 대부분에서 lombok이 만들어준 Builder 패턴 구현체들을 사용하는 나로써는 엄청난 문제가 아닐 수 없다. </p>
<p>이는 컴파일 타임에서 Kotlin이 Java보다 먼저 컴파일되기 때문에, Java의 컴파일된 byte code 레벨에서 구현체를 만드는 lombok을 사용할 수 없는 것이다. 실제로 mvn compile을 수행해보면 Kotlin plugin들이 먼저 도는 것을 확인할 수 있다. </p>
<p>이 문제를 해결하기 위해선 build configurations를 통해 Kotlin이 Java보다 나중에 컴파일되게 구현하면 되는데 이러면 Java에서 Kotlin을 보지 못하는 더 중대한 문제(…)가 발생하므로, 번거롭더라도 Java로 작성한 도메인 로직에 Kotlin 기반 DTO를 POJO로 바꿔주는 로직을 작성하는 것이 가장 좋다. </p>
<p><strong>번거롭긴 해도 Java로 작성한 DTO와 씨름하는 것보다는 훨씬 나을 것이라 장담한다.</strong></p>
<p>이 문제에 대해선 <a href="https://stackoverflow.com/questions/35517325/kotlin-doesnt-see-java-lombok-accessors" target="_blank" rel="noopener">다음 문서</a>를 참고해보자. </p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/03/19/hackathon-kotlin/" data-id="ckk5ihpqv000hdg9o3xd286s0" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/03/19/hackathon-kotlin/#disqus_thread" class="article-comment-link">댓글</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-windows-diskpart" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/30/windows-diskpart/">DiskPart로 파티션을 내맘대로 다뤄보자.</a>
    </h1>
  

        <a href="/2018/01/30/windows-diskpart/" class="article-date">
  <time datetime="2018-01-29T16:24:59.000Z" itemprop="datePublished">2018-01-30</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="윈도우의-유일하게-유용한-시스템-유틸리티-Diskpart를-활용해보자"><a href="#윈도우의-유일하게-유용한-시스템-유틸리티-Diskpart를-활용해보자" class="headerlink" title="윈도우의 유일하게 유용한 시스템 유틸리티, Diskpart를 활용해보자."></a>윈도우의 유일하게 유용한 시스템 유틸리티, Diskpart를 활용해보자.</h3><p>Windows의 CLI 지원은 한심한 수준이고 PowerShell은 있으나마나한 물건이지만 거의 유일하게 쓸만한 유틸리티인 Diskpart는 그 사용법을 확실히 알아두는 것이 좋다.</p>
<p>더구나 Windows 머신이라면 최소 일 년에 두어번 정도는 OS를 갈아엎고 디스크 환경을 바꿔줘야 할 일이 생기므로 Diskpart의 사용법을 잘 알아둔다면 Windows의 설치에 걸리는 시간과 노력(!)을 획기적으로 줄일 수 있을 것이다. </p>
<h4 id="list-명령-gt-뭔가-목록을-보여준다"><a href="#list-명령-gt-뭔가-목록을-보여준다" class="headerlink" title="list 명령 -&gt; 뭔가 목록을 보여준다."></a>list 명령 -&gt; 뭔가 목록을 보여준다.</h4><p>말 그대로 list 하는 명령이다. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">list -[disk, partition, volume....]</span><br><span class="line"></span><br><span class="line">list disk : 시스템에 설치된 물리적 디스크를 모두 보여준다. </span><br><span class="line">list partition: 선택된 디스크의 파팃녀을 모두 보여준다. </span><br><span class="line">list volume: 시스템에 등록되어 있는 모든 볼륨을 보여준다.</span><br></pre></td></tr></table></figure>
<h4 id="select-명령-gt-뭔가를-선택한다"><a href="#select-명령-gt-뭔가를-선택한다" class="headerlink" title="select 명령 -&gt; 뭔가를 선택한다."></a>select 명령 -&gt; 뭔가를 선택한다.</h4><p>디스크의 구성 요소를 list 한 뒤엔 select를 수행해 수정할 파티션, 볼륨, 디스크 등을 확정해줘야 한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select disk &apos;disk_id&apos; : disk_id번 디스크를 선택한다. </span><br><span class="line">select partition, volume, etc....</span><br></pre></td></tr></table></figure>
<h4 id="shrink-gt-파티션의-크기를-줄인다"><a href="#shrink-gt-파티션의-크기를-줄인다" class="headerlink" title="shrink -&gt; 파티션의 크기를 줄인다."></a>shrink -&gt; 파티션의 크기를 줄인다.</h4><p>여기부터 이제 실질적 파티션 정보의 조작을 전담하는 놈들을 알아볼 것이다. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shrink </span><br><span class="line">    volume=&apos;drive_letter&apos; : 드라이브 레터에 맞는 파티션의 크기를 줄일 것이다.</span><br><span class="line">                            예를 들어 C드라이브의 크기를 줄이겠다면 shrink volume=c다.</span><br><span class="line">                            그러나 이렇게 사용하는 것은 권하지 않는다.</span><br><span class="line">                            가급적 list -&gt; select -&gt; shrink의 순서를 따르자. </span><br><span class="line">                            그래야 실수하지 않는다.</span><br><span class="line">    </span><br><span class="line">    querymax: 줄일 수 있는 최대 크기를 구하는 것이다. </span><br><span class="line">    예를 들어 500GB짜리 파티션이 230GB를 사용하고 있다면 querymax 값은 270GB다.</span><br><span class="line"></span><br><span class="line">    desired=&apos;size_in_MB&apos; : size_in_MB 크기만큼 볼륨을 줄인다.</span><br></pre></td></tr></table></figure>
<h4 id="create-gt-유에서-무를-창조한다"><a href="#create-gt-유에서-무를-창조한다" class="headerlink" title="create -&gt; 유에서 무를 창조한다."></a>create -&gt; 유에서 무를 창조한다.</h4><p>파티션을 줄였다면 디스크에 노는 공간이 생겼을 터, CREATE을 돌려 파티션을 만들어줘야 파일을 저장할 수 있다. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create</span><br><span class="line">    - volume</span><br><span class="line">    - partition</span><br><span class="line">    - vdisk : 이건 아직 써보지 않아서 모르겠다. 위에 두 개는 각자 알아서 무슨 뜻일지 해석하자.</span><br></pre></td></tr></table></figure>
<h4 id="assign-gt-이름표를-붙여준다"><a href="#assign-gt-이름표를-붙여준다" class="headerlink" title="assign -&gt; 이름표를 붙여준다."></a>assign -&gt; 이름표를 붙여준다.</h4><p>Windows는 모든 파티션에 드라이브 레터(e.g. C: D:)가 할당돼야 파일시스템 상에서 접근할 수 있다. </p>
<p>assign 명령을 통해 당신의 꼴통같은 Windows 머신의 디스크에 최대한 굴욕적인 이름을 붙여주자. </p>
<p><strong>assign 명령을 실행시키기 전에 DiskPart의 커서는 드라이브 레터가 할당되지 않은 빈 파티션을 향하고 있어야 한다. list - select 조합으로 잘 선택해주자.</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">assign</span><br><span class="line">    - 아무것도 안 쓰면 오름차순으로 자동 문자 배정. (e.g. C: D: 가 존재 -&gt; E: 배정.)</span><br><span class="line"></span><br><span class="line">    letter=&apos;your_desired_drive_letter&apos; : 너의 마음대로 드라이브 레터를 붙여주는 것이다. </span><br><span class="line">    최대한 글자 모양이 우스꽝스러운 Z 나 Y 같은 녀석들을 추천한다. </span><br><span class="line">    Windows는 존중받을 가치가 없는 OS다.</span><br></pre></td></tr></table></figure>
<h4 id="총정리"><a href="#총정리" class="headerlink" title="총정리"></a>총정리</h4><p>총정리를 위해 아래와 같은 요구사항을 만족하는 사용 시나리오를 작성해 보겠다. </p>
<p><em>요구사항</em></p>
<blockquote>
<p>1번 디스크의 2번 파티션의 크기를 500GB로 줄인다. </p>
<p>1번 디스크의 새로 생긴 공간에 파티션을 만들고 드라이브 레터를 자동 배정한다.</p>
<p>NTFS 파일시스템으로 포맷하고 파일을 저장할 수 있게 준비한다.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">list disk</span><br><span class="line"></span><br><span class="line">select disk 1</span><br><span class="line"></span><br><span class="line">list partition</span><br><span class="line"></span><br><span class="line">select partition 2</span><br><span class="line"></span><br><span class="line">shrink querymax</span><br><span class="line"></span><br><span class="line">shrink desired=200000(파티션 2의 크기가 700GB였다고 가정하겠음. 1GB=1000MB)</span><br><span class="line"></span><br><span class="line">create partition</span><br><span class="line"></span><br><span class="line">assign</span><br><span class="line"></span><br><span class="line">format fs=ntfs</span><br></pre></td></tr></table></figure>
<p><strong>어때요, 참 쉽죠?</strong></p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/01/30/windows-diskpart/" data-id="ckk5ihpyd009vdg9oivhosc4f" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/01/30/windows-diskpart/#disqus_thread" class="article-comment-link">댓글</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/powershell/">powershell</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/windows/">windows</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-django-no-sites" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/24/django-no-sites/">Django로 삽질한 이야기 (01) - 사이트가 없어졌다!</a>
    </h1>
  

        <a href="/2018/01/24/django-no-sites/" class="article-date">
  <time datetime="2018-01-24T13:12:48.000Z" itemprop="datePublished">2018-01-24</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="Django로-삽질한-이야기-01-사이트가-없어졌다"><a href="#Django로-삽질한-이야기-01-사이트가-없어졌다" class="headerlink" title="Django로 삽질한 이야기 (01) - 사이트가 없어졌다!"></a>Django로 삽질한 이야기 (01) - 사이트가 없어졌다!</h3><p><em>글쓴이 주: Java-Spring이 백엔드 개발의 전부인 줄 알았던 봄이네집이 Django 기반 웹서비스 개발 학습을 시작한다.</em></p>
<p><em>Django의 늪에서 삽질하는 얘기를 앞으로도 종종 블로그에 담을 생각이다.</em></p>
<hr>
<h4 id="삽질의-배경"><a href="#삽질의-배경" class="headerlink" title="삽질의 배경"></a>삽질의 배경</h4><p><a href="https://www.inflearn.com/course/django-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EC%9E%A5%EA%B3%A0-%EA%B0%95%EC%A2%8C/" target="_blank" rel="noopener">Hoyoung Jung님의 Django로 웹서비스 만들기 강의</a> 를 열심히 따라하다보면 Django 기반 웹 프로젝트에 Social Login을 붙일 수 있게 된다. </p>
<p><a href="https://github.com/pennersr/django-allauth" target="_blank" rel="noopener">Django-Allauth</a>를 사용하는 것인데 이 패키지는 사용법이 매우 쉽고, 설정이 간결하며 무엇보다도 시중의 많은 소셜 로그인 공급자들의 설정에 맞게 다양한 구현체가 존재한다는 점이 굉장한 이점이다. </p>
<p><strong>그러나 이제 이 패키지는 쓸 수 없다.</strong> Django가 2.0으로 판올림되면서 <a href="https://code.djangoproject.com/ticket/24716" target="_blank" rel="noopener">get_val_from_obj() 메소드가 삭제</a>되었는데 아직 Django-allauth 패키지는 이에 대응하지 못하고 있기 때문이다. 삭제된 이 메소드를 여전히 사용하고 있는 Django-allauth는 admin page에서 유저 정보에 접근시 엄청난 에러를 뿜어낸다. 정확히 말하면 User 객체가 갖고 있는 정보를 JSON으로 serialize해주지 못하는 상황에 직면하게 된다. </p>
<p>그래서 대안으로 소셜 로그인 패키지의 교체를 결정하고, 삽질이 시작되는데….. </p>
<hr>
<h4 id="삽질의-시작"><a href="#삽질의-시작" class="headerlink" title="삽질의 시작"></a>삽질의 시작</h4><p>소셜 로그인 패키지를 <a href="https://github.com/python-social-auth/social-app-django" target="_blank" rel="noopener">Python-social-auth</a>로 교체하였다. </p>
<p>교체한 후 애플리케이션의 모델 중 기존 allauth가 생성한 user_id를 Foreign key로 갖고 있는 부분을 다 수정하였다. </p>
<p>그러나 기존 DB 스키마가 갖고 있는 column constraints에 자꾸 걸려서 migrate 명령이 <strong>실행되지 않았고</strong> 결국 아래와 같은 무식한 방법으로 그냥 DB를 <strong>통째로 날려버렸다.</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm db.sqlite3</span><br></pre></td></tr></table></figure>
<p><strong>진짜 단순무식한 방법이지만 효과는 굉장했다!</strong> 이제 migrate 명령이 잘 작동한다. <em>당연하지. DB를 통째로 날렸는데….</em></p>
<p>그리고 admin page가 접속되지 않기 시작하는데……</p>
<hr>
<h4 id="삽질의-원인"><a href="#삽질의-원인" class="headerlink" title="삽질의 원인"></a>삽질의 원인</h4><p>admin 페이지는 아래와 같은 메시지를 뿜어내며 접속되지 않고 있었다. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DoesNotExist at /admin/ Site matching query does not exist.</span><br></pre></td></tr></table></figure>
<p>문제가 발생한 원인은 간단한 것으로 Django가 DB에 갖고 있던 <strong>사이트 정보</strong> 가 사라진 것이 원인이다. 원래 Django는 DB에 Site라는 객체를 매핑한 후 사이트 정보를 담아둔다. 이 매핑 작업은 django-admin startproject 시에 수행되지만, 나처럼 project 개발 도중에 DB를 날려버리는 <strong>화끈한 개발자</strong>를 위한 대비는 해 두지 않았으므로 나같은 사람들은 간단한 shell 작업을 통해 Site 객체를 다시 DB에 입력시켜줘야 할 것이다. </p>
<hr>
<h4 id="삽질의-끝"><a href="#삽질의-끝" class="headerlink" title="삽질의 끝"></a>삽질의 끝</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(from your project root directory)</span><br><span class="line"></span><br><span class="line">python manage.py shell</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt;from django.contrib.sites.models import Site</span><br><span class="line"><span class="meta">&gt;</span>&gt;&gt;Site.objects.create(name='your_site_name', domain='your_site_domain')</span><br></pre></td></tr></table></figure>
<p>작업을 수행해준 후 project root directory의 settings.py에 방문한다. 아래와 같은 라인이 존재하는지 체크하고 없으면 작성해준다. </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SITE_ID = <span class="number">1</span></span><br><span class="line"><span class="comment">#많은 경우에 SITE_ID는 1번이다. 그러나 여러분의 상황에 따라 다를 수도 있다. 이런 설정은 알아서 잘 하자.</span></span><br></pre></td></tr></table></figure>
<p>이제 admin 페이지는 잘 보일 것이다. </p>
<hr>
<h4 id="참고-문헌"><a href="#참고-문헌" class="headerlink" title="참고 문헌"></a>참고 문헌</h4><p><a href="https://stackoverflow.com/questions/11476210/getting-site-matching-query-does-not-exist-error-after-creating-django-admin" target="_blank" rel="noopener">Stack Overflow-Getting Site Matching Query Does Not Exist Error after creating django admin</a></p>
<hr>
<p><em>과연 삽질이 이것뿐이었을까요? Django로 삽질한 이야기의 글감은 넘쳐나고 있습니다.</em></p>
<p><em>앞으로도 계속 연재될 Django 삽질기, 많이 기대해주세요! 고맙습니다.</em></p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2018/01/24/django-no-sites/" data-id="ckk5ihpqq000ddg9o965bgjeh" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2018/01/24/django-no-sites/#disqus_thread" class="article-comment-link">댓글</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/django/">django</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-using-enums-api-development" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/22/using-enums-api-development/">Enum을 사용해 실수를 줄인다.</a>
    </h1>
  

        <a href="/2017/12/22/using-enums-api-development/" class="article-date">
  <time datetime="2017-12-22T03:34:15.000Z" itemprop="datePublished">2017-12-22</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="Enum을-적극적으로-사용해보자"><a href="#Enum을-적극적으로-사용해보자" class="headerlink" title="Enum을 적극적으로 사용해보자."></a>Enum을 적극적으로 사용해보자.</h3><p>Enum은 enumerated에서 따온 말로, 우리말로 옮기믄 “열거형” 이라고들 많이 하는 모양이다. </p>
<p>개인적으로 “열거형” 이란 표현은 enum의 본질을 제대로 담고 있지 못하다고 생각해서 그리 바람직한 번역이라고는 생각되지 않는다. 또 Swift에서도 enum이 있는 것 같은데 그쪽 친구들은 이 괴상한 단어를 “이늄” 이라고 읽는다. </p>
<p><strong>이늄 이라니, 얼마나 세련된 발음인가?</strong> 애석하게도 우리 Java 진영에서는 대다수의 개발자들이 이걸 “이넘” 이라고 주로 읽는 것 같고 “에넘” 이라고 하시는 분도 간혹가다가 본다. enum의 어원인 enumerated라는 영단어의 밞음을 살펴보면 Swift쪽의 발음이 더 간지나는 것 뿐만 아니라 어원에도 충실한 발음인 것 같다. </p>
<p>enum을 어떻게 선언하는지, 어떻게 값을 관리하는지에 대한 개념 설명은 <strong>이 글에서 다루지 않겠다.</strong> 내가 생각하기에 (내가) enum을 더 많이 사용해야 하는 이유, 개발 상의 용이한 점 및 주의점들에 대해 서술해 보고, 마지막에 지금 진행중인 프로젝트에서 내가 어떻게 enum을 활용하고 있는지에 대해 간단하개 코드 중심으로 공유하고 글을 마치고자 한다. </p>
<h4 id="왜-우리는-enum을-사용해야-하는가"><a href="#왜-우리는-enum을-사용해야-하는가" class="headerlink" title="왜 우리는 enum을 사용해야 하는가?"></a>왜 우리는 enum을 사용해야 하는가?</h4><p>예제 코드로 시작해보자. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedVelvet</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; members = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    (...)</span><br><span class="line"></span><br><span class="line">    members.add(<span class="string">"슬기"</span>);</span><br><span class="line">    members.add(<span class="string">"웬디"</span>);</span><br><span class="line">    members.add(<span class="string">"조이"</span>);</span><br><span class="line">    members.add(<span class="string">"예리"</span>);</span><br><span class="line">    members.add(<span class="string">"아이린"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//standard getter/seters, hashCode(), toString() follows....</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>국내 최고의 인기 걸그룹 레드벨벳의 멤버 정보를 담고 있는 이 클래스는 다섯 멤버들의 이름을 String으로 하드코딩하여 사용하고 있다. 자. 그러면 다른 객체에서 멤버들의 이름 정보를 가져와서 사용해 볼까…..</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedVelvetConcert</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    (...)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printConcertInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        String msg = String.format(<span class="string">"이번 차례는 %s의 솔로 무대입니다!"</span> , RedVelvet.getMembers.get(<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>어떤 느낌이 드는가? 우리가 RedVelvetConcert 클래스를 설계할 때, 멤버 정보를 담고있는 RedVelvet.getMembers()의 반환값이 슬기, 웬디, 조이, 예리, 아이린의 순서대로 정렬되어 있음을 보장할 수 있을까? </p>
<p>RedVelvetConcert를 설계한 사람이 속세와 인연을 끊고 사는 열헐 개발자인 경우엔 어떻게 할까? 그는 이 코드를 작성하며 레드벨벳의 멤버 정보에 대해 <strong>IDE로부터 전혀 힌트를 얻지 못한다.</strong></p>
<p>RedVelvet을 enum으로 바꿔주면 어떨까? 아래와 같이 말이다. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> RedVelvet &#123;</span><br><span class="line">    SEULGI(<span class="string">"슬기"</span>),</span><br><span class="line">    WENDY(<span class="string">"웬디"</span>),</span><br><span class="line">    JOY(<span class="string">"조이"</span>),</span><br><span class="line">    YERI(<span class="string">"예리"</span>),</span><br><span class="line">    IRENE(<span class="string">"아이린"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    </span><br><span class="line">    RedVelvet(String name) &#123;</span><br><span class="line">        <span class="comment">/*많은 개발자들이 enum의 생성자에 private 접근 제어자를 붙이는 것을 알고 있다.</span></span><br><span class="line"><span class="comment">        하지만 굳이 그러지 않아도 된다.*/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>자, 이제 printConcertInfo()도 다시 작성해보자.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printConcertInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String msg = String.format(<span class="string">"이번 차례는 %s의 솔로 무대입니다!"</span> , </span><br><span class="line">    RedVelvet.WENDY.getName());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>생 String을 뽑아와서 붙일 때보다 훨씬 간결하고, 무엇보다 <strong>누구나 이해할 수 있는 코드가 되지 않았나?</strong> Wendy를 “웬디” 라고 발음한다는 정도만 알면 레드벨벳을 잘 모르는 사람이라도 쉽게 이 코드를 유지보수할 수 있을 것이다. </p>
<hr>
<h4 id="JPA-Entity에서-Enum을-활용해보자"><a href="#JPA-Entity에서-Enum을-활용해보자" class="headerlink" title="JPA Entity에서 Enum을 활용해보자."></a>JPA Entity에서 Enum을 활용해보자.</h4><p><strong>JPA로 관리하는 Model 객체에서도 Enum을 사용할 수 있다.</strong> 아래와 같이 구현하면 된다. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RedVelvetMember</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue</span>(strategy = GenerationType.AUTO)</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">long</span> id;</span><br><span class="line"></span><br><span class="line">    (...)</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Enumerated</span>(EnumType.STRING)</span><br><span class="line">    <span class="keyword">private</span> RedVelvet redVelvet;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Enumerated 애노테이션이 EnumType이라는 또다른 enum을 field로 갖고 있는 것을 볼 수 있는데 개발자에게 주어진 옵션은 두 가지다. </p>
<blockquote>
<p>EnumType.STRING = enum의 .name() 값을 칼럼에 입력한다 </p>
<p>(e.g. RedVelvet.SEULGI =&gt; SEULGI 라고 칼럼에 입력됨)</p>
<p>EnumType.ORDINAL = enum의 순서가 INT로 칼럼에 입력된다 </p>
<p>(e.g. RedVelvet.IRENE =&gt; 다섯번째 요소이므로 5로 입력됨)</p>
</blockquote>
<p>enum을 한 번 구현해놓고 <strong>절대로 내용이나 순서를 바꿀 생각이 없다면</strong> ORDINAL로 써도 된다. <em>근데 그런 경우가 있을까?</em> </p>
<p>실제로 많은 JPA 책에서도 .STRING 을 사용할 것을 강력 추천하고 있다. 왠만하면 STRING 쓰자. </p>
<hr>
<h4 id="더-읽어보기"><a href="#더-읽어보기" class="headerlink" title="더 읽어보기"></a>더 읽어보기</h4><p><a href="http://woowabros.github.io/tools/2017/07/10/java-enum-uses.html" target="_blank" rel="noopener">우아한형제들 개발자가 enum 적용시켜 본 이야기 - Java Enum 활용기</a></p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2017/12/22/using-enums-api-development/" data-id="ckk5ihpxq008ydg9ooaocacqx" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2017/12/22/using-enums-api-development/#disqus_thread" class="article-comment-link">댓글</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring/">Spring</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/clean-code/">clean-code</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/enum/">enum</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bruteforce-protection" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/13/bruteforce-protection/">브루트 포스 공격을 막아봅시다.(Spring Security에서의 예외 처리)</a>
    </h1>
  

        <a href="/2017/12/13/bruteforce-protection/" class="article-date">
  <time datetime="2017-12-13T12:27:35.000Z" itemprop="datePublished">2017-12-13</time>
</a>
      </header>
    
    <div class="article-entry-abstract" itemprop="articleBody">
      
        <!--<h3 id="간단한-브루트-포스-Brute-Force-공격을-막아보자"><a href="#간단한-브루트-포스-Brute-Force-공격을-막아보자" class="headerlink" title="간단한 브루트 포스(Brute Force) 공격을 막아보자."></a>간단한 브루트 포스(Brute Force) 공격을 막아보자.</h3><p>말은 거창하지만 간단하다. 브루트 포스(Brute Force)란 비밀번호가 맞을 때까지 노가다로 때려맞히는, 아주 원초적이지만 효과적이고 또 돈도 안 드는 공격 방식이다. </p>
<p>3G 통신이 상용화도 되기 전 대부분의 핸드폰들은 단순한 4자리의 암호 체게를 갖고 있었고, 기본 비밀번호는 4빵, 즉 0000 이었다. 친구들의 핸드폰을 탈취해 꼭 시도해봤던 일 중 하나는 이 네 자리의 암호를 때려맞혀 보는 일이었다. </p>
<p>비밀번호는 숫자 네 자리로만 이뤄져있으니 단순한 계산으로 생각해보면 0000~9999의 숫자를 한 번씩만 시도해보면 언젠가는 비밀번호를 알아낼 수 있을 일이었다. 그러나 한 다섯번 쯤 시도하면 늘 뜨는 에러 메시지, <em>입력 횟수 초과! n분 후에 시도하세요.</em> 가 나의 원대한 도전을 늘 가로막았었다. </p>
<h4 id="이런-식의-공격이-요즘-웹에-의미가-있나"><a href="#이런-식의-공격이-요즘-웹에-의미가-있나" class="headerlink" title="이런 식의 공격이 요즘 웹에 의미가 있나?"></a>이런 식의 공격이 요즘 웹에 의미가 있나?</h4><p>결론부터 말하면 <strong>의미없다고 생각한다.</strong> 브루트 포스 공격이 통하기엔 이미 모던 웹 서비스들은 복잡도가 너무 높은 비밀번호를 요구하고 있다(주인도 까먹어서 문제다). 또 이런 비밀번호에 대한 유효성 검증을 회원가입 시에 프론트 단에서 구현해주기 때문에 브루트 포스 공격으로 비밀번호가 털릴 상황은 그렇게 많이 연출되지 않을 거라고 본다. </p>
<p>그러나 스프링 시큐리티에서의 브루트 포스 방어는 Spring Boot 기반 프로젝트에서의 캐시 사용, Exception Handler 구현 등 연습해볼 만한 도전과제가 넘쳐나는 구현이다. </p>
<p>따라서 나는 실 서비스를 위한 보안 목적이라기보단 학습 목적으로 이번 구현을 시작했음을 미리 밝혀둔다. </p>
<h4 id="무엇을-어디서"><a href="#무엇을-어디서" class="headerlink" title="무엇을? 어디서?"></a>무엇을? 어디서?</h4><p>로그인 과정 상에서 Exception을 발생시켜 로그인 로직 자체를 멈추게 할 것이란 계획은 세웠다, 그렇다면 <strong>무슨 Exception을 어디서 발생시키나?</strong> 를 고민해야 한다.</p>
<p>우선 누가 암호를 몇 번 틀렸는지 기록하기 위해 com.google.commons에 들어있는 <a href="https://google.github.io/guava/releases/19.0/api/docs/com/google/common/cache/LoadingCache.html" target="_blank" rel="noopener">LoadingCache</a>를 사용할 것이다. Key는 String으로, 횟수를 저장할 Value는 Integer로 저장할 것이다. 또 이 Cache 인스턴스를 들고 있으면서 특정 IP의 차단 여부를 판별하고, 로그인 성공 / 실패 이벤트가 생길 때마다 저장 내용을 조작할 LoginAttemptService를 구현할 것이다.</p>
<p>Exception은 RuntimeException을 상속받는 LoginAttemptExceedException을 만들어 줄 것이며, CustomUserDetailsService.loadByUsername()으로 유저 정보 질의가 들어왔을 때 해당 IP의 차단 여부를 체크해 Exception을 발생시키게 된다. 이를 위해 CustomUserDetailsService는 LoginAttemptService를 Autowire받게 된다. </p>
<h4 id="LoginAttemptService"><a href="#LoginAttemptService" class="headerlink" title="LoginAttemptService"></a>LoginAttemptService</h4><p>로그인 실패 시도를 기록하고 차단 여부를 알려줄 서비스는 아래와 같이 구현한다. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">@Service</span><br><span class="line">public class LoginAttemptService &#123;</span><br><span class="line"></span><br><span class="line">    private final int MAX_ATTEMPT = 2; //허용 시도횟수 두번. </span><br><span class="line">    private LoadingCache&lt;String, Integer&gt; attemptsCache;</span><br><span class="line"></span><br><span class="line">    public LoginAttemptService() &#123;</span><br><span class="line">        super();</span><br><span class="line">        attemptsCache = CacheBuilder.newBuilder()</span><br><span class="line">                .expireAfterWrite(1, TimeUnit.DAYS).build(new CacheLoader&lt;String, Integer&gt;() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public Integer load(String key) throws Exception &#123;</span><br><span class="line">                        return 0;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void loginSucceeded(String key) &#123;</span><br><span class="line">        attemptsCache.invalidate(key);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void loginFailed(String key) &#123;</span><br><span class="line">        int attempts = 0;</span><br><span class="line">        try &#123;</span><br><span class="line">            attempts = attemptsCache.get(key);</span><br><span class="line">        &#125; catch(ExecutionException e) &#123;</span><br><span class="line">            attempts = 0;</span><br><span class="line">        &#125;</span><br><span class="line">        attempts++;</span><br><span class="line">        attemptsCache.put(key, attempts);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void resetAttempt(String key) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            attemptsCache.put(key, 0);</span><br><span class="line">        &#125; catch(Exception e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public boolean isBlocked(String key) &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            return attemptsCache.get(key) &gt;= MAX_ATTEMPT;</span><br><span class="line">        &#125; catch (ExecutionException e) &#123;</span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>LoadingCache의 .get()이 Exception을 발생시키는 점이 맘에 들지 않지만…. 그냥 Optional<t> 로 구현하면 더 나았을텐데. 하긴 LoadingCache는 인터페이스에 불과하므로 CacheBuilder를 쓰지 않고 내가 직접 구현해서 쓰는 것도 방법이 될 수 있겠다. </t></p>
<h4 id="IntegratedFormloginFailureHandler"><a href="#IntegratedFormloginFailureHandler" class="headerlink" title="IntegratedFormloginFailureHandler"></a>IntegratedFormloginFailureHandler</h4><p>클래스명이 쓸데없이 거창한 모습이다. 이 핸들러를 통해 로그인 에러 페이지도 커스터마이즈하고 싶었기에 클래스명을 이렇게 붙여 봤다. </p>
<p>구현은 아래와 같이…. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class IntegratedFormloginFailureHandler implements AuthenticationFailureHandler &#123;</span><br><span class="line">    private static final Logger log = LoggerFactory.getLogger(IntegratedFormloginFailureHandler.class);</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onAuthenticationFailure(HttpServletRequest req, HttpServletResponse res, AuthenticationException e) throws IOException, ServletException &#123;</span><br><span class="line">        if (isBruteForceEvent(e)) &#123;</span><br><span class="line">            log.error(&quot;brute force event detected from failure handler!&quot;);</span><br><span class="line">            log.error(&quot;cause of exception : &#123;&#125;&quot; , e.getCause().getClass().getName());</span><br><span class="line">            res.sendRedirect(&quot;/captcha&quot;);//횟수 초과 시에 이동할 주소.</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        log.error(&quot;general sign-in fail event detected from failure handler!&quot;);</span><br><span class="line">        res.sendRedirect(&quot;/signin&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private boolean isBruteForceEvent(AuthenticationException e) &#123;</span><br><span class="line">        return e.getCause() instanceof LoginAttemptExceedException;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>isBruteForceEvent()의 e.getCause()가 신경이 쓰일 거라 생각한다. 사실 이렇게 구현해야 한다는 것을 수십번의 삽질, 그리고 Throwable에 대한 학습 후 알아낼 수 있었다. </p>
<p>우선 로그인 과정에서 Exception이 발생했을 때 콘솔에 어떤 메시지가 뜨는지를 살펴보자 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.security.authentication.InternalAuthenticationServiceException: login attempt exceeds!</span><br><span class="line">	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:126)</span><br><span class="line">	(...)</span><br><span class="line">	at java.lang.Thread.run(Thread.java:748)</span><br><span class="line">Caused by: codesquad.security.Exceptions.LoginAttemptExceedException: login attempt exceeds!</span><br><span class="line">	at codesquad.security.CustomUserDetailsService.loadUserByUsername(CustomUserDetailsService.java:49)</span><br><span class="line">	at org.springframework.security.authentication.dao.DaoAuthenticationProvider.retrieveUser(DaoAuthenticationProvider.java:114)</span><br><span class="line">	... 53 common frames omitted</span><br></pre></td></tr></table></figure>
<p>Stack Trace상에서 Caused By: 를 주목할 필요가 있겠다. 우선 Spring Security에서 사용자 인증 과정중에 발생한 모든 Exception은 InternalAuthenticationServiceException으로 Wrapping된 후에 던져진다는 점을 알 수 있었다. <strong>이걸 알기 전까지 무수한 삽질을 반복해야 했다.</strong> 이걸 모르고 Handler상에서 LoginAttemptExceedException을 바로 찾았으니 당연히 찾아지지 않았다. </p>
<p>InternalAuthenticationServiceException을 뜯어보면 이 클래스는 AuthenticationServiceException을 상속받고 있고 이는 다시 AuthenticationException을 상속받은 예외다. </p>
<p>스프링 시큐리티가 예외 처리용으로 제공하는 AuthenticationFailureHandler 인터페이스의 .onAuthenticationFailure() 메소드는 AuthenticationException을 인자로 받고 있는데, Spring Security 단에서 발생하는 모든 AuthenticationException과 이를 상속받은 예외들이 이 Handler를 통해 처리되게 되는 것이다. </p>
<p>사용자 인증 과정에서 발생하는 <strong>AuthenticationException을 상속받지 않은 모든 예외는 InternalAuthenticationServiceException으로 감싸진 채로 던져지므로</strong> e.getCause()를 호출해 Cause Exception을 불러와야 우리가 구현한 LoginAttemptExceedException의 내용을 확인할 수 있는 것이다. </p>
<p>아, 말로 써놓고 보니 어렵다. 이런 방식을 Chained Exception 이라고 하는 것 같은데 <a href="https://docs.oracle.com/javase/tutorial/essential/exceptions/chained.html" target="_blank" rel="noopener">이 글</a>을 참고해 보면 좋겠다. </p>
<p>어려운 구현은 다 끝났고 남은 건 자질구레한 설정들이다. </p>
<h4 id="Spring-Security의-SecurityConfig을-일부-변경"><a href="#Spring-Security의-SecurityConfig을-일부-변경" class="headerlink" title="Spring Security의 SecurityConfig을 일부 변경."></a>Spring Security의 SecurityConfig을 일부 변경.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Configuration</span><br><span class="line">@EnableOAuth2Client</span><br><span class="line">public class SecurityConfig extends WebSecurityConfigurerAdapter &#123;</span><br><span class="line"></span><br><span class="line">    private IntegratedFormloginFailureHandler failureHandler = new IntegratedFormloginFailureHandler();</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">     .formLogin()</span><br><span class="line">                    .loginPage(&quot;/signin&quot;)</span><br><span class="line">                    .loginProcessingUrl(&quot;/signin&quot;)</span><br><span class="line">                    .successHandler(this.signinRedirectionHandler)</span><br><span class="line">                    .failureHandler(this.failureHandler)//아까 공들여 만든 실패 핸들러를 등록시켜준다. </span><br><span class="line">                    .permitAll()</span><br></pre></td></tr></table></figure>
<h4 id="CustomUserDetailsService가-IP-차단-여부를-체크하도록-변경"><a href="#CustomUserDetailsService가-IP-차단-여부를-체크하도록-변경" class="headerlink" title="CustomUserDetailsService가 IP 차단 여부를 체크하도록 변경."></a>CustomUserDetailsService가 IP 차단 여부를 체크하도록 변경.</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException &#123;</span><br><span class="line">        log.debug(&quot;load username : &#123;&#125;&quot; , username);</span><br><span class="line"></span><br><span class="line">        String ip = getClientIP();</span><br><span class="line">        if (loginAttemptService.isBlocked(ip)) &#123;</span><br><span class="line">            </span><br><span class="line">            throw new LoginAttemptExceedException(&quot;login attempt exceeds!&quot;);</span><br><span class="line">      </span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //클라이언트의 IP를 알아내는 메소드</span><br><span class="line"></span><br><span class="line">    private String getClientIP() &#123; </span><br><span class="line">        String header = req.getHeader(&quot;X-Forwarded-For&quot;);</span><br><span class="line">        if (header == null) &#123;</span><br><span class="line">            return req.getRemoteAddr();</span><br><span class="line">        &#125;</span><br><span class="line">        return header.split(&quot;,&quot;)[0];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong>어때요, 참 쉽죠?</strong></p>
<p>리디렉션을 /captcha로 돌려주는 것에서 이미 짐작하셨겠지만 다음 구현과제는 Google의 <a href="https://www.google.com/recaptcha/intro/android.html" target="_blank" rel="noopener">reCAPTCHA</a>를 서비스에 적용해보는 것이다. </p>
<h4 id="유용했던-참고자료"><a href="#유용했던-참고자료" class="headerlink" title="유용했던 참고자료"></a>유용했던 참고자료</h4><p><a href="http://www.baeldung.com/spring-security-block-brute-force-authentication-attempts" target="_blank" rel="noopener">Prevent Brute Force Authentication Attempts with Spring Security</a></p>
<p><a href="https://google.github.io/guava/releases/19.0/api/docs/com/google/common/cache/LoadingCache.html" target="_blank" rel="noopener">LoadingCache Javadoc</a></p>
<p>+포비의 힌트. 감사합니다~!</p>
-->
      
    </div>
    <footer class="article-footer">
      <!--<a data-url="https://tech.wheejuni.com/2017/12/13/bruteforce-protection/" data-id="ckk5ihpx7008mdg9o92ie6lc6" class="article-share-link">공유</a>-->
      
        <a href="https://tech.wheejuni.com/2017/12/13/bruteforce-protection/#disqus_thread" class="article-comment-link">댓글</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Spring-Security/">Spring_Security</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 이전</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/5/">다음 &raquo;</a>
  </nav>

</section>
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2021 정휘준<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> with 
      theme_by <a href="http://hexo.io/" target="_blank">mango</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives/" class="mobile-nav-link">Archives</a>
  
    <a href="/about/" class="mobile-nav-link">about</a>
  
</nav>
    
<script>
  var disqus_shortname = 'bomee';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>